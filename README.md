# My Portfolio Avcorad
액션 RPG
 

## 목차
1. 프로젝트 소개
2. 개발기간
3. 구현한 기능
4. 개발과정중 발생한 문제 및 해결한 방안
5. 플레이 영상
6. 개발중 느낀점
 

## 🎮Project 소개
액션 RPG


## 🕔개발기간
2022.11.14 ~ 2023.01.15
![스케쥴](https://user-images.githubusercontent.com/109446729/213032386-9143cb30-7280-4bec-ac8d-50480b2d79d6.jpg)


## 🏋️‍♀️구현 기능
이동, 공격, 스킬, 인벤토리, 락온, 퀵슬롯, 몬스터


## ⌨️개발 과정 중 발생 한 문제 및 해결 한 방안


### 캐릭터 구현

![Honeycam 2023-01-18 07-53-27](https://user-images.githubusercontent.com/109446729/213030048-d493d520-6ef5-4469-8c8f-4531867c2136.gif)

+ 이동 

GetAxis를 사용하여 플레이어의 이동을 구현하였습니다.

움직임에 따라 시점의 변화를 주기 위해 카메라가 마우스의 움직임에 따라 움직이게 하니

카메라만 움직이고 캐릭터는 움직이지 않는 상태가 되었습니다,

그래서 캐릭터에게 마우스축의 입력 값을 주니 좌우 회전은 되지만

위아래의 회전은 캐릭터가 회전하게되어 영 웃긴모양이 되었습니다.

그래서 캐릭터는 좌우 회전만, 카메라는 위아래 회전의 기능만 주어 캐릭터의 움직임과 시점을 해결하였습니다.



+ 공격

간단한 프로젝트들을 제작하며 원거리공격만 구현하다 보니

근접공격을 구현하면서 생각보다 많이 어렵다는것을 깨달았습니다. 

공격이 1번만 들어 가야 하는데 여러번 들어 간다던지, 

연속공격은 어떻게 구현해야 할 지 감도 잡히지 않았지만 구글 검색을 통해 

animation에 event를 통해 공격이 들어가는 collider를 활성화 비활성화 하는 방안으로 구현하였고,

연속공격은 Sub - StateMachine을 통해 해결하였습니다.

+ NPC

저의 프로젝트에서 NPC는 크게 필요없기에 처음에 대략적인

조작키만 알려주는 NPC로 구현하였습니다. 대화는 List로 구현하였습니다.


![Honeycam 2023-01-18 07-53-52](https://user-images.githubusercontent.com/109446729/213030074-845c06c8-dec7-405d-8ff3-e7caa4fcf25f.gif)

![Honeycam 2023-01-18 07-54-20](https://user-images.githubusercontent.com/109446729/213030112-664da3f6-ff29-4cbf-b6e0-d2d280af59fd.gif)

+ 공격 판정

플레이어의 공격판정은 무기에 주었습니다.

무기에 콜라이더를 주고 애니메이션 재생시 

공격순간에 콜라이더를 활성화 비활성화로 구현하였습니다.

이렇게하니 필드에 무기가 드랍이 되어있을때

몬스터가 로밍하다가 닿으면, 데미지를 입게되는 버그가 발생했습니다.

이 문제는 무기에서 콜라이더를 제거하고 공격판정을 하는 콜라이더를 플레이어 앞에 추가하면

해결이 가능합니다. 이 부분은 몬스터에게 적용해 주었습니다.

몬스터는 무기가 없기에 손부분에 콜라이더를 입혔으나

공격은 하지만 콜라이더가 닿지 않아 붙어 있는데도

플레이어가 데미지를 입지 않는 상황이 발생하여

캐릭터앞에 콜라이더를 주면 좋겠다 라는 생각에서 구현하게 되었습니다.



+ 스킬 

스킬은 5종류를 구현하였습니다. 

객체 지향으로 구현하였으며 퀵슬롯에 등록하여 사용이 가능합니다. 

구현하면서 어려웠던점은 인벤토리 부분에서 더 자세히 말씀드리겠으나

퀵슬롯에 등록된 스킬의 data를 가져 오는것이 가장 큰 문제였습니다. 

처음엔 ScriptableObject를 사용하여 구현 하였었으나 data를 가져 오는것이 

코드를 보았을 때 헷갈리는 부분이 있어

스킬을 list에 담고 리스트에 있는 스킬과 슬롯에 있는 스킬이 같으면 사용을 하게 구현하였습니다.

그러나 ScriptableObject를 사용한것과 지금 구현한것도 똑같이 코드가 깨끗하지 못해

지저분합니다. 유튜브를 보고 참고하여 수정하였으나 개발력의 한계로 타협을 보았습니다.


+ 인벤토리 

인벤토리는 <https://geojun.tistory.com/62> 이곳과 

<https://ansohxxn.github.io/unity%20lesson%203/ch5-2/> 이곳을 참고하여 제작하였습니다. 

처음엔 드래그앤 드롭으로 장비를 장착하고 퀵슬롯에 등록하고를 구현하였었으나...

그렇게 이동한 오브젝트의 data를 가져오는것이 정말 너무 힘이들었고

결국 드래그앤 드롭에서 노선을 변경하여 

클릭시 장착버튼이 나오게 되어 아이템일경우는 장비장착 슬롯에 장착이되고,

물약이나 스킬같은경우는 퀵슬롯에 등록되게 구현하였습니다.

현재 이 인벤토리의 문제는 아이템들이 퀵슬롯으로 가거나,

장착 슬롯으로 가도 자리를 차지하고있어

새로운 아이템이 들어왔을때 비워진 칸을 채우는것이 아닌 그뒤로 채워진다는 점입니다...

이문제는 우선 기간내 프로젝트의 완성이 제 1 우선사항이였기에 일단은 두고 다른기능들을 구현하였습니다.


+ 락온

특정키, 현재에서는 G키를 입력하면 ray를 쏴서 시네머신 가상카메라의 LookAt을 설정하도록 구현하였습니다. 

문제점은 카메라는 캐릭터의 뒤에 고정되어 있고, 타겟을 보고있기때문에 시점이 불편한 점입니다.

시네머신의 softzone, deadzone을 활용하면 해결이 가능할 것으로 보고있습니다.


+ 퀵슬롯 

물약이나, 스킬을 등록할수있습니다. 

아이템의 object를 자식오브젝트로 이동시켜 등록기능을 구현하였습니다. 

스킬이나 물약사용시 슬롯의 색상을 바꾸어 사용했다는 가시성을 주었습니다.


+ 몬스터 

스크립트로 구현하려 했으나, 스크립트에서 속도를 주고 애니메이션을 재생하면 

미끄러지듯이 움직이는것이 싫어 오로지 애니메이션으로만 구현하게 되었습니다. 

그로인해 코드가 굉장히 지저분해지고 애니메이터 자체도 굉장히 지저분해져서 

개발하는 본인조차도 헷갈리는 문제가 있습니다. 

이부분도 기간이후 더 만져보면서 해결해볼 예정입니다.

애니메이션의 경우 update로 구현하게되면 

계속 애니메이션을 재생하게 되는 문제가 있었습니다.

그래서 프로퍼티로 상태를 받아와 해결하였습니다.


+ 오프닝씬 및 엔딩씬 

Timeline을 이용하여 제작하였습니다.

잘되는듯 싶었으나 문제는 플레이중 메인화면으로 갔다

다시 실행하면 플레이어캐릭터의 위치가 변하지 않는 버그와 재생이 안되는 문제가 발생했습니다. 

재생이 안되는것은 Timeline의 timascale이 GameTime으로 되어있어 

UncaledGameTime으로 변경해 주니 재생은 되지만 플레이어 캐릭터의 위치는 변하지 않았습니다.

이문제는 유니티의 버그인것인지 rigidbody 컴포넌트를 제거하니 잘 실행이 되었습니다.

+ 타격감

타격감이 밋밋 하다는 피드백을 받아 추가로 제작하게 되었습니다.

타격감을 구성하는 요소는 많이 있겠으나,

이번에 처음으로 알게된 타격이 들어갈때 시간을 잠시 멈춰줌으로써 

타격감을 더 좋게 해줄수 있다는 것을 알았습니다.

화면 흔들림같은 경우는 너무 세차게 흔들거나 자주 흔들리면

눈이 아프거나 두통, 혹은 멀미가 올수있으므로

제가 보기에 불편하지 않은 정도로 구현 하였습니다.

공격하였을 때 몬스터가 맞았다는 느낌을 더 확실히 주기 위해

빨간색으로 반짝이던 것에 파티클을 추가하여 피가 튀는 것 처럼

추가하여 조금더 타격감을 올렸습니다.

플레이어가 공격받을 경우도 화면의 테두리 부분에도 효과를 주었습니다.

아쉬운점은 공격모션에 검기같은 vfx를 적용하고 싶었으나,

작업 막바지에 적용하려 하다보니 적용하지 못하였습니다.

+ 회피

회피시 Layer를 바꾸는것으로 회피를 구현했으나,

정상적으로 작동이 되지않기에 '왜 안되는 것인가 레이어는 변하는데...'

하고 유심히보니 레이어는 트리거는 인식하지 못한다는것을 알았습니다.

그래서 tag를 바꿔주는 방식으로 구현 하였습니다.




## 🖥️플레이영상
[https://drive.google.com/file/d/1a_fFPcb_qXOAQSEekPZVmvnnMyru6we2/view?usp=sharing](https://drive.google.com/file/d/1IbsaG23GmW0ywrSYP1MEA5TodaNJma63/view?usp=sharing)


## 📖개발중 느낀점

개발중 확실하게 느낀 것은 확실한 계획이 필요하고,

어떤상태에서 어떻게 할 것 인지 대략적인 뼈대(알고리즘?)를 구상한뒤 

구현하는 것이 가장 중요하다는 것을 깨달았습니다. 

지금은 그냥 이 기능 구현해야지 저기능 구현해야지 라는 느낌으로만

제작하니 여러가지 버그들이 터지고...문제들이 많이 발생한거 같습니다. 

그리고 우선 기능을 먼저 구현하고, 디테일을 잡아 나가는것이 맞다는 생각이 듭니다. 

리소스를 구하는것과, 애니메이션을 구하는 것이 가장 큰 문제였습니다. 

애니메이션은 전부 mixamo에서 구하다보니 

할수있는 액션과 캐릭터는 한정될 수 밖에 없었습니다. 

이 프로젝트가 저의 첫 포트폴리오 작품이고, 

엉성하고 아직 한참 멀었지만, 

점점 더 발전해서 더 나은 모습으로 프로젝트들을 진행하면 좋을거같습니다.
